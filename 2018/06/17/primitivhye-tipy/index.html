<!DOCTYPE html><html lang="ru"><head><meta charset="utf-8"><title>Всё не так с целочисленными примитивами в java | Decembrist blog</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="В языке Java 8 примитивных типов  Целочисленные byte, short, int, long (отчасти/полностью char) Вещественные double и float Булевый boolean соответственно  Если, скажем, ты будешь выполнять простейшие"><meta property="og:type" content="article"><meta property="og:title" content="Всё не так с целочисленными примитивами в java"><meta property="og:url" content="https://godslovecats.github.io/decembrist.blog/2018/06/17/primitivhye-tipy/index.html"><meta property="og:site_name" content="Decembrist blog"><meta property="og:description" content="В языке Java 8 примитивных типов  Целочисленные byte, short, int, long (отчасти/полностью char) Вещественные double и float Булевый boolean соответственно  Если, скажем, ты будешь выполнять простейшие"><meta property="og:locale" content="ru"><meta property="og:updated_time" content="2018-06-17T19:07:29.316Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Всё не так с целочисленными примитивами в java"><meta name="twitter:description" content="В языке Java 8 примитивных типов  Целочисленные byte, short, int, long (отчасти/полностью char) Вещественные double и float Булевый boolean соответственно  Если, скажем, ты будешь выполнять простейшие"><link rel="alternate" href="/" title="Decembrist blog" type="application/atom+xml"><link rel="icon" href="/decembrist.blog/favicon.png"><link rel="stylesheet" href="/decembrist.blog/libs/font-awesome5/css/fontawesome.min.css"><link rel="stylesheet" href="/decembrist.blog/libs/font-awesome5/css/fa-brands.min.css"><link rel="stylesheet" href="/decembrist.blog/libs/font-awesome5/css/fa-solid.min.css"><link rel="stylesheet" href="/decembrist.blog/libs/open-sans/styles.css"><link rel="stylesheet" href="/decembrist.blog/libs/source-code-pro/styles.css"><link rel="stylesheet" href="/decembrist.blog/css/style.css"><script src="/decembrist.blog/libs/jquery/2.1.3/jquery.min.js"></script><link rel="stylesheet" href="/decembrist.blog/libs/lightgallery/css/lightgallery.min.css"><link rel="stylesheet" href="/decembrist.blog/libs/justified-gallery/justifiedGallery.min.css"></head><body><div id="container"><header id="header"><div id="header-main" class="header-inner"><div class="outer"><a href="/decembrist.blog/" id="logo"><i class="logo"></i> <span class="site-title">Decembrist blog</span></a><nav id="main-nav"><a class="main-nav-link" href="/decembrist.blog/.">Home</a> <a class="main-nav-link" href="/decembrist.blog/archives">Archives</a> <a class="main-nav-link" href="/decembrist.blog/categories">Categories</a> <a class="main-nav-link" href="/decembrist.blog/tags">Tags</a> <a class="main-nav-link" href="/decembrist.blog/about">About</a></nav><nav id="sub-nav"><div class="profile" id="profile-nav"><a id="profile-anchor" href="javascript:;"><img class="avatar" src="/decembrist.blog/images/logo.svg"> <i class="fas fa-caret-down"></i></a></div></nav><div id="search-form-wrap"><form class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Поиск"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Введите что-нибудь..."> <span class="ins-close ins-selectable"><i class="fas fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"посты",PAGES:"страницы",CATEGORIES:"категории",TAGS:"теги",UNTITLED:"(Без названия)"},ROOT_URL:"/decembrist.blog/",CONTENT_URL:"/decembrist.blog/content.json"}</script><script src="/decembrist.blog/js/insight.js"></script></div></div></div><div id="main-nav-mobile" class="header-sub header-inner"><table class="menu outer"><tr><td><a class="main-nav-link" href="/decembrist.blog/.">Home</a></td><td><a class="main-nav-link" href="/decembrist.blog/archives">Archives</a></td><td><a class="main-nav-link" href="/decembrist.blog/categories">Categories</a></td><td><a class="main-nav-link" href="/decembrist.blog/tags">Tags</a></td><td><a class="main-nav-link" href="/decembrist.blog/about">About</a></td><td><div class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Поиск"></div></td></tr></table></div></header><div class="outer"><aside id="profile" class="profile-fixed"><div class="inner profile-inner"><div class="base-info profile-block"><img id="avatar" src="/decembrist.blog/images/logo.svg"><h2 id="name">Decembrist</h2><h3 id="title">Decembrist blog</h3><span id="location"><i class="fas fa-map-marker-alt" style="padding-right:5px"></i>jopa</span> <a id="follow" target="_blank" href="">Подписаться</a></div><div class="article-info profile-block"><div class="article-info-block">2 <span>посты</span></div><div class="article-info-block">0 <span>тег</span></div></div><div class="profile-block social-links"><table><tr><td><a href="http://github.com/ppoffice/hexo-theme-icarus" target="_blank" title="github"><i class="fab fa-github"></i></a></td><td><a href="/decembrist.blog/" target="_blank" title="twitter"><i class="fab fa-twitter"></i></a></td><td><a href="/decembrist.blog/" target="_blank" title="facebook"><i class="fab fa-facebook"></i></a></td><td><a href="/decembrist.blog/" target="_blank" title="dribbble"><i class="fab fa-dribbble"></i></a></td><td><a href="/decembrist.blog/" target="_blank" title="rss"><i class="fab fa-rss"></i></a></td></tr></table></div></div></aside><section id="main"><article id="post-primitivhye-tipy" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">Всё не так с целочисленными примитивами в java</h1><div class="article-meta"><div class="article-date"><i class="fas fa-calendar-alt"></i> <a href="/decembrist.blog/2018/06/17/primitivhye-tipy/"><time datetime="2018-06-17T17:21:56.244Z" itemprop="datePublished">2018-06-17</time></a></div></div></header><div class="article-entry" itemprop="articleBody"><p>В языке Java 8 примитивных типов</p><ul><li>Целочисленные byte, short, int, long (отчасти/полностью char)</li><li>Вещественные double и float</li><li>Булевый boolean соответственно</li></ul><p>Если, скажем, ты будешь выполнять простейшие операции вроде сумма разница (+/-) или любыми другими<br>с 2мя переменными одного типа, то результирующий тип более или менее предсказуем.</p><p>К примеру:</p><pre><code>int a = 2;
int b =3;
</code></pre><p>Результирующий тип операции <code>a + b</code> будет <code>int</code></p><h3 id="Как-это-проверить"><a href="#Как-это-проверить" class="headerlink" title="Как это проверить"></a>Как это проверить</h3><p>(Если ты пока не сильно понимаешь в ООП то можешь скопипастить вот такой класс для проверки типов )</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Type</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    		<span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">private</span> String MESSAGE_TEMPLATE = <span class="string">"This is %s type"</span>;</span><br><span class="line"></span><br><span class="line">    		<span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    			System.out.println(String.format(MESSAGE_TEMPLATE, <span class="string">"int"</span>));</span><br><span class="line">    		&#125;</span><br><span class="line"></span><br><span class="line">    		<span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(<span class="keyword">long</span> a)</span> </span>&#123;</span><br><span class="line">    			System.out.println(String.format(MESSAGE_TEMPLATE, <span class="string">"long"</span>));</span><br><span class="line">    		&#125;</span><br><span class="line"></span><br><span class="line">    		<span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(<span class="keyword">short</span> a)</span> </span>&#123;</span><br><span class="line">    			System.out.println(String.format(MESSAGE_TEMPLATE, <span class="string">"short"</span>));</span><br><span class="line">    		&#125;</span><br><span class="line"></span><br><span class="line">    		<span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(<span class="keyword">byte</span> a)</span> </span>&#123;</span><br><span class="line">    			System.out.println(String.format(MESSAGE_TEMPLATE, <span class="string">"byte"</span>));</span><br><span class="line">    		&#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>Объяснение кода класса выходит за границы данного видео, но если вкратце, то вызов метода<br>check у экземпляра этого класса с примитивным целочисленным параметром будет выводить<br>текст <code>&quot;This is ${название типа} type&quot;</code></p><p>проверим:</p><pre><code>int a = 2; //объявлена переменная примитивного типа int
final Type type = new Type(); //создаётся экземпляр класса Type (код выше)
type.check(a); //проверяем тип
</code></pre><p>Вывод: <code>This is int type</code></p><p>Пока всё логично:<br>Сложим-ка теперь 2 переменных типа <code>int</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">2</span>; <span class="comment">//объявлена первая переменная примитивного типа int</span></span><br><span class="line"><span class="keyword">int</span> b = <span class="number">2</span>; <span class="comment">//объявлена вторая переменная примитивного типа int</span></span><br><span class="line"><span class="keyword">final</span> Type type = <span class="keyword">new</span> Type(); <span class="comment">//создаётся экземпляр класса Type (код выше)</span></span><br><span class="line">type.check(a + b); <span class="comment">//проверяем тип</span></span><br></pre></td></tr></table></figure><p>Вывод <code>This is int type</code></p><p>Пока всё логично.</p><p>Но что будет если сложить 2 примитива разных типов:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> a = <span class="number">2</span>; <span class="comment">//объявлена первая переменная примитивного типа long</span></span><br><span class="line"><span class="keyword">int</span> b = <span class="number">2</span>; <span class="comment">//объявлена вторая переменная примитивного типа int</span></span><br><span class="line"><span class="keyword">final</span> Type type = <span class="keyword">new</span> Type(); <span class="comment">//создаётся экземпляр класса Type (код выше)</span></span><br><span class="line">type.check(a + b); <span class="comment">//проверяется тип</span></span><br></pre></td></tr></table></figure><p>Какой вывод? А?</p><p>Правильный ответ <code>This is long type лонг</code></p><p>Почему?</p><p>Возможно ты не знаешь но типы <code>byte, short, int, long</code> отличаются вместимостью<br>(что означает что в памяти они занимают разное количество байтиков)</p><p><code>byte</code> - 1 байтик - Диапазон значений от -128 до 127 включительно,</p><p><code>short</code> - 2 байтиков - Диапазон значений от -32768 до 32767 включительно,</p><p><code>int</code> - 4 байтиков - Диапазон значений от -2147483648 до 2147483647 включительно,</p><p><code>long</code> - 8 байтиков - Диапазон значений от -2 в 63 степени до 2 в 63 степени - 1 включительно</p><p>cоответственно вмещаемый диапазон значений тоже увеличивается с количеством байтов<br>ты можешь увидеть конкретные числа в даннной таблице</p><p>java конвертирует оба операнда в более широкий тип изза указаных выше причин<br>таким образом фактически складываются 2 типа лонг и результатом само собой будет тип лонг</p><p>а теперь поглядим что будет если указанные диапазоны значений переполнить<br>для типа <code>int</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> intMax = <span class="number">2147483647</span>; <span class="comment">//запись в переменную максимально возможного числа типа int</span></span><br><span class="line">System.out.println(intMax + <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>вывод казалось бы должен быть 2147483648<br>но вывод -2147483648</p><p>Так как тип <code>int</code> не вмещает больше 4 байт или числа 2147483647 следующее число в последовательности<br>это минимально возможное значение диапазона типа <code>int</code><br>таким образом число будет вращаться по кругу вновь при каждом переполнении возвращаться к минимальному<br>и наоборот соответственно, что может ызывать ошибку в твоих вычислениях</p><p>Если ты предполагаешь что число может быть выше возможного максимального значения используй более широкий тип<br>Минимальное и максимальное значения типа <code>int</code> можно получить через статический метод <code>Integer.MIN_VALUE</code><br>и <code>Integer.MAX_VALUE</code> соответственно <code>int intMax = Integer.MAX_VALUE;</code></p><p>типы <code>Byte Short</code> и <code>Long</code> работают аналогично</p><p>Таким образом стоит запомнить что при операциях с разными типами данных результат будет более широкого типа</p><p>Посмотрим что будет при операциях с типами <code>byte</code> и <code>short</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span> a = <span class="number">2</span>; <span class="comment">//объявлена первая переменная примитивного типа byte</span></span><br><span class="line"><span class="keyword">int</span> b = <span class="number">3</span>; <span class="comment">//объявлена первая переменная примитивного типа int</span></span><br><span class="line">Type type = <span class="keyword">new</span> Type(); <span class="comment">//создаётся экземпляр класса Type (код выше)</span></span><br><span class="line">type.check(a + b); <span class="comment">//проверяется тип</span></span><br></pre></td></tr></table></figure><p>вывод: <code>This is int type</code><br>Чтож, вполне логично исходя из изложенного выше, результат более широкого типа <code>int</code></p><p>Посмотрим на такой пример</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span> a = <span class="number">2</span>; <span class="comment">//объявлена первая переменная примитивного типа byte</span></span><br><span class="line"><span class="keyword">short</span> b = <span class="number">3</span>; <span class="comment">//объявлена первая переменная примитивного типа short</span></span><br><span class="line">Type type = <span class="keyword">new</span> Type(); <span class="comment">//создаётся экземпляр класса Type (код выше)</span></span><br><span class="line">type.check(a + b); <span class="comment">//проверяется тип</span></span><br></pre></td></tr></table></figure><p>вывод: <code>This is int type</code></p><p>Возможно выглядит неожиданно снова тип int<br>Если почитать спецификации Java машины можно найти пару строк об этом<br>Перед любой операции с типами <code>byte</code> или <code>short</code> оба операнда будут сначала конвертированы<br>в тип <code>int</code> а <code>int + int</code> даёт <code>int</code></p><blockquote><p>When an operator applies binary numeric promotion to a pair of operands, each of<br>which must denote a value that is convertible to a numeric type, the following rules apply,<br>in order, using widening conversion (§5.1.2) to convert operands as necessary:<br>If any of the operands is of a reference type, unboxing conversion (§5.1.8) is performed. Then:<br>If either operand is of type double, the other is converted to double.<br>Otherwise, if either operand is of type float, the other is converted to float.<br>Otherwise, if either operand is of type long, the other is converted to long.<br>Otherwise, both operands are converted to type int.</p></blockquote><p>таким образом код</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">byte</span> b = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">byte</span> c = a + b;</span><br></pre></td></tr></table></figure><p>компилироваться не будет</p><h3 id="Подведем-итоги"><a href="#Подведем-итоги" class="headerlink" title="Подведем итоги"></a>Подведем итоги</h3><ol><li>Если другой примитивный целочисленный тип выполняет операцию с типом <code>long</code> результат будет типа <code>Long</code></li><li>Если среди операторов типа <code>long</code> нет, то результатом операций будет тип <code>int</code></li></ol><p>Ну чтож на этом на сегодня всё, можешь самостоятельно попробовать подобные трюки с<br>типами <code>float</code> и <code>double</code> или <code>char</code> по секрету скажу, там всё примерно также</p></div><footer class="article-footer"><div class="share-container"></div><a data-url="https://godslovecats.github.io/decembrist.blog/2018/06/17/primitivhye-tipy/" data-id="cjij8gnyz0002zcivwr71180p" class="article-share-link"><i class="fas fa-share"></i>Поделиться</a><script>!function(n){"undefined"!=typeof __SHARE_BUTTON_BINDED__&&__SHARE_BUTTON_BINDED__||(__SHARE_BUTTON_BINDED__=!0,n("body").on("click",function(){n(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var e,a=n(this),o=a.attr("data-url"),i=encodeURIComponent(o),r="article-share-box-"+a.attr("data-id"),s=a.offset();if(n("#"+r).length){if((e=n("#"+r)).hasClass("on"))return void e.removeClass("on")}else{var l=['<div id="'+r+'" class="article-share-box">','<input class="article-share-input" value="'+o+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+i+'" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+i+'" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+i+'" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+i+'" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join("");e=n(l),n("body").append(e)}n(".article-share-box.on").hide(),e.css({top:s.top+25,left:s.left}).addClass("on")}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){n(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}))}(jQuery)</script></footer></div><nav id="article-nav"><a href="/decembrist.blog/2018/06/17/hello-world/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Старые</strong><div class="article-nav-title">Hello World</div></a></nav></article></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">недавние</h3><div class="widget"><ul id="recent-post"><li><div class="item-thumbnail"><a href="/decembrist.blog/2018/06/17/primitivhye-tipy/" class="thumbnail"><span class="thumbnail-image thumbnail-none"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/decembrist.blog/2018/06/17/primitivhye-tipy/" class="title">Всё не так с целочисленными примитивами в java</a></p><p class="item-date"><time datetime="2018-06-17T17:21:56.244Z" itemprop="datePublished">2018-06-17</time></p></div></li><li><div class="item-thumbnail"><a href="/decembrist.blog/2018/06/17/hello-world/" class="thumbnail"><span class="thumbnail-image thumbnail-none"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/decembrist.blog/2018/06/17/hello-world/" class="title">Hello World</a></p><p class="item-date"><time datetime="2018-06-17T17:06:13.064Z" itemprop="datePublished">2018-06-17</time></p></div></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">архивы</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/decembrist.blog/archives/2018/06/">июнь 2018</a><span class="archive-list-count">2</span></li></ul></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">ссылки</h3><div class="widget"><ul><li><a href="https://decembrist.org/">decembrist.org</a></li></ul></div></div><div id="toTop" class="fas fa-angle-up"></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2018 decembrist<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a></div></div></footer><script src="/decembrist.blog/libs/lightgallery/js/lightgallery.min.js"></script><script src="/decembrist.blog/libs/lightgallery/js/lg-thumbnail.min.js"></script><script src="/decembrist.blog/libs/lightgallery/js/lg-pager.min.js"></script><script src="/decembrist.blog/libs/lightgallery/js/lg-autoplay.min.js"></script><script src="/decembrist.blog/libs/lightgallery/js/lg-fullscreen.min.js"></script><script src="/decembrist.blog/libs/lightgallery/js/lg-zoom.min.js"></script><script src="/decembrist.blog/libs/lightgallery/js/lg-hash.min.js"></script><script src="/decembrist.blog/libs/lightgallery/js/lg-share.min.js"></script><script src="/decembrist.blog/libs/lightgallery/js/lg-video.min.js"></script><script src="/decembrist.blog/libs/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="/decembrist.blog/js/main.js"></script></div></body></html>